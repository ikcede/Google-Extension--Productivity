function open(e){var t=localStorage[e];if(!t||typeof t==="undefined"){return{prod:false,time:-1,timer:false,unproductive:[]}}else return JSON.parse(t)}function save(e,t){localStorage[t]=JSON.stringify(e)}function extractDomain(e){var t=document.createElement("a");t.href=e;return t.hostname}chrome.tabs.onCreated.addListener(function(e){var t=open("productive.ly");chrome.tabs.getSelected(null,function(e){if(t.prod&&t.unproductive.indexOf(extractDomain(e.url))>-1){chrome.tabs.insertCSS(e.id,{code:"body{opacity:.2 !important;}"})}})});chrome.tabs.onUpdated.addListener(function(e){var t=open("productive.ly");chrome.tabs.getSelected(null,function(e){if(t.prod&&t.unproductive.indexOf(extractDomain(e.url))>-1){chrome.tabs.insertCSS(e.id,{code:"body{opacity:.2 !important;}"})}else{chrome.tabs.insertCSS(e.id,{code:"body{opacity:1 !important;}"})}})});chrome.tabs.onActivated.addListener(function(e){var t=open("productive.ly");chrome.tabs.getSelected(null,function(e){if(t.prod&&t.unproductive.indexOf(extractDomain(e.url))>-1){chrome.tabs.insertCSS(e.id,{code:"body{opacity:.2 !important;}"})}else{chrome.tabs.insertCSS(e.id,{code:"body{opacity:1 !important;}"})}})})